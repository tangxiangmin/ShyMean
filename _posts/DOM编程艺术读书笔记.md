---
title: 《DOM编程艺术》读书笔记
date: 2016-05-28 21:57:21
tags:
	- 读书笔记
categories:
	- JavaScript
---
《DOM编程艺术》这本书短小精悍，值得一看，入门必备呀！囫囵吞枣看了两遍，补充了一点笔记。

<!--more-->

D，O，M解释

>文档对象模型，把整个网页当成一棵节点树，每个节点都可以通过某条联系找到该页面中的其他任何节点

三种比较重要的节点

>元素节点：非常重要，大多数操作都是对元素节点的操作

>文本节点：文本节点总是被包围在元素节点之中（XHTML闭合标签），注意并非所有的元素节点都有文本节点

>属性节点：对元素节点做更具体的描述，如title src class 等等属性标签

获取元素节点的方式

>getElementById()//返回一个节点

>getElementsByTagName()//返回节点列表（类数组对象），即使只有一个元素节点也必须通过下标访问

>getElementsByClassName()//同上



获取元素节点上的属性节点与设置属性节点

>getAttribute("title")//获取title属性的值，若无返回null

>setAttribute("title","hello")//为titile属性设置hello的值，可以通过这种方式设置类名，注意会覆盖前面的属性值



获取元素节点内的文本节点与设置文本节点

>innerHTML()//只有这一个方法，如果为其赋值则表示设置文本内容，如果直接返回则显示该元素节点中的文本内容，注意会返回其下的所有标签代码与文本内容。想要单独改变文本节点的内容应使用nodeValue属性（注意是一个属性）。



所有的DOM操作设置的样式都是行内样式，因此其优先级非常非常高。



获取一个元素节点的所有子节点，childNodes

>首先注意这是一个属性而不是方法；

>其次，该属性只统计他自己的子节点而不计算其子节点的子节点，空格与换行都算是文本节点；

>在不同浏览器下会返回不同的节点总数。可以通过节点的nodeType属性查看其具体属性，其中：

	* 1表示元素节点

	* 2表示属性节点

	* 3表示文本节点，

	* 此外共有12种节点类型，虽然并没有什么用处。

>可以使用first-child和last-child属性代替childNodes[0和childNodes[length-1]；此外firstElementChild在标准下获取第一个元素类型的节点，但是非标准的ie不支持，在非标准的ie下firstChild获取到的就是第一个元素节点，（真是坑）。



获取元素的父元素和兄弟元素节点的相关属性

>parentNode//元素的父节点

>offsetParent//离当前结点最近的有定位的父节点

>nextSibling 和nextElementSibling//下一个兄弟（元素）节点

>previousSibling 和previousSibling//上一个兄弟（元素）节点



平稳退化与渐进增强

>平稳退化：正确使用js，在浏览器不支持的情况下尽可能顺利地显示页面内容。平稳退化对于爬虫非常有效。因此不要将重要的内容放在DOM加载显示。

>渐进增强：用一些额外的JS数据去包裹原始数据使其缤纷多彩，即使JS无法使用也能正常显示主要内容



优化性能

>尽可能少访问DOM和尽量减少标记

>合并放置多个脚本，减少服务器响应次数

>压缩脚本，缩短加载时间



DOM core 和HTML-DOM的区别

HTML-DOM中访问元素节点的属性时可以直接使用"."运算符



动态创建节点的方法

>创建元素节点： document.createElement(nodename)//创建了一个元素节点，一般需要将其赋给某个变量

>创建文本节点： document.createTextNode(text)//创建内容为text的文本节点



将创建的节点插入到节点树中

>通过父元素： parent.appendChild(node)//将动态创建的节点插入到父节点中

>通过兄弟元素： sibling.insertBefore(node)//将动态创建的节点插入到兄弟节点前，注意没有insertAfter方法，需要自定义一个。



通过style属性获取及设置样式

>选择器属性名如果存在“-”，应当使用驼峰命名法；

>此外通过style属性只能返回行内样式；而当为style对象的属性设置值时必须将值放入引号中；



通过className属性来设置更多的样式

*该属性返回对应元素节点的所有类名，相当于getAttribute("class")；

>同样可以通过该属性为对应的元素节点设置新的类名，相当于setAttribute("class",newClassName)；



使用定时器创建动画

定时器是window全局对象的方法，每隔一段时间就调用指定函数，完成动画效果。比如一个移动的动画，其本质效果是改变元素的定位属性值，因此需要预先设定元素的定位方式。 需要注意的是通过事件触发的对象，一定要考虑定时器的重复触发问题，这是由于变量作用域引起的。



关于W3C标准的思考

我所理解的W3C标准就是“结构，表现，行为三者分离”，但是随着逐步深入，发现HTML,CSS,DOM之间都有互相叠加的区域，可以在HTML中设置样式与事件响应，可以在CSS中通过伪类达成动态交互，可以在DOM中创建节点及设置样式，三者并不冲突，而具体使用则需要仔细斟酌。随着CSS3和HTML5的深入，发现这三者越来越融合的感觉。



书本最后介绍了HTML5和一些常用的库，不再赘述。