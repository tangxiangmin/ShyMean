---
title: 外边距重叠
date: 2016-06-02 08:23:50
tags:
	- 样式
categories:
	- CSS
---
外边距重叠是盒子模型中一个比较常见的情形，所谓重叠，指的是当两个在垂直外边距（指上下）相遇时，会按照指定的规则进行定位。
<!--more-->
两个外边距重叠的元素之间的距离按照下面标准取舍：
* 全部都为正值，取最大者；
* 不全是正值，则都取绝对值，然后用正值减去最大绝对值；
* 全部都是负值，则都取绝对值，然后用0减去最大绝对值。

## 定义
标准里面关于外边距重叠的定义是：collapsing-margin，两个或多个毗邻的普通流中的块元素垂直方向上的 margin 会重叠。这句话真是无比的精炼啊：
* 只有竖直方向上的外边距才会发生重叠。
* 最少存在两个块级元素才会发生外边距重叠。注意这里其实有两种情况的重叠：两个兄弟块元素之间的重叠，以及子块元素与父级元素之间的重叠。
* 只有处于普通流中，且相邻的块才会发生重叠。注意，这里的相邻：如果是兄弟元素，指的是他们之间没有被非空内容，或者带有padding,border和clear等在文档流中占有面积的块分隔开来；如果是父子元素，指的是子块带有margin，父块没有padding和border的情况，此时如果父块没有触发BFC，则父块与子块的也会发生外边距折叠。（最常见的情形就是并没有为父块设置外边距时，整个父块却活生生地向下偏移了N个像素，而此时子块紧贴着父块的顶部，其本来具有的外边距却不见了的诡异事件，就像是外边距“渗透“了一样）
* 这句话并没有表现出来，这是由BFC规定的。只有属于同一个BFC的两个块元素才会发生外边距重叠。


## 清除外边距折叠
有时候我们在布局的时候，并不希望产生外边距重叠，该如何解决呢？之前在记录BFC的时候简单提到了清除外边距重叠的方法，这里再详细的介绍一下。
### 父子元素
解决父子元素之间的外边距重叠问题，只需要父元素带上padding或者border就可以了，然而这会改变其盒子模型的大小；因此可以使父元素触发BFC，一般采用overflow： hidden，这样就可以解决了。
### 兄弟元素
浮动元素、inline-block 元素、绝对定位元素不会和垂直方向上相邻的其他元素发生外边距重叠。可以看出这些都是具有BFC属性的元素。但是！千万不要认为所有的BFC元素就都不会发生外边距重叠了，不然你用overflow:hidden试试。所以，应当将上面的这几种情形当作特例，最根本的原因是：只有在同一个BFC内的元素才会发生外边距的折叠，如果两个元素处在不同的BFC中则不会发生外边距折叠。因此，对于相邻元素，只要将它们放上不同 的BFC 中（比如为他们添加一个空的BFC包裹层），就能使它们的 margin 不重叠。

## 最后
外边距重叠只是CSS中一个很小的问题，路漫漫其修远兮啊。
学习CSS第一天的感觉：好简单，我已经精通CSS了...
学习CSS第十天的感觉：咦？这个东西我以前怎么没见过...
学习CSS一个月的感觉：什么玩意儿？我特么什么都不会啊！！
